<!doctype html>
<html lang="ja">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS â†“ headå†…éƒ¨ã«ä»–ã®CSSã‚ˆã‚Šå…ˆã«ç½®ã-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>ãƒ©ã‚ºã‚¿ãƒ³ã‚¯ |CoderDojoé’æ¢…</title>
    <meta name="keywords" content="Scratch, é’æ¢…å¸‚, é’æ¢…, ãƒ‘ã‚½ã‚³ãƒ³, ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢, å­ã©ã‚‚, å°å­¦æ ¡, ä¸­å­¦æ ¡, CoderDojo, ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°" />
    <meta name="description" content="ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ(Gather Town)ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•ã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™">
    <!-- favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="icon" href="/favicon.ico" type="image/vnd.microsoft.icon">

    <!-- Squad theme CSS -->
    <link href="/css/style.css" rel="stylesheet">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-35574608-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-35574608-3');
    </script>

    <meta property="og:title" content="Gather Town ãƒ­ã‚°ã‚¤ãƒ³æ“ä½œ" />
    <meta property="og:description" content="ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ(Gather Town)ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•ã‚’ãŠçŸ¥ã‚‰ã›ã—ã¾ã™" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://coderdojoome.github.io/report/report033.html" />
    <meta property="og:image" content="https://coderdojoome.github.io/report/img/practice25/03meet.png" />
    <meta property="og:site_name" content="CoderDojoé’æ¢…" />

  </head>
  
<body id="page-top" data-spy="scroll" data-target=".navbar-custom">
<!-- å…±é€šã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<div id="commonHeader"></div>
<div class="container">
  <div class="limegreen-container">  
  <!-- ä¸»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->

  <!-- ä¸Šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£SNSã®ç”»åƒå·®ã—æ›¿ãˆã‚‹ã“ã¨  -->
  <h1>ãƒ©ã‚ºã‚¿ãƒ³ã‚¯é›»å­å·¥ä½œ</h1>
  <h3>æ‰‹é †ï¼‘ï¼é…ç·šãŒæ­£ã—ã„ã‹æ¤œæŸ»ã‚’ã—ã¾ã™ã€‚</h3>
  <h3>æ‰‹é †ï¼’ï¼é›»æºãŒã‚ªãƒ³ã«ãªã£ã¦ã„ã‚‹ã“ã¨ï¼ˆã‹ãŸãšã‘ã‚‹ã¨ãã¯å¿…ãšã‚ªãƒ•ã«ã™ã‚‹ã“ã¨ï¼‰ã€‚</h3>
  <h3>æ‰‹é †ï¼“ï¼python ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã€‚ã‚­ãƒ¼å…¥åŠ›ã§å‹•ãã‚ˆ<br />ã€€[w]é€²ã‚€ã€€[x]ã‚¹ãƒˆãƒƒãƒ—ã€€[z]å¾Œé€²ã€€[a]å·¦æ—‹å›ã€€[s]å³æ—‹å›ã€€[q]çµ‚äº†</h3>
  <p></p>

  <h2>é…ç·šå›³</h2>
  <p>ãƒ¢ãƒ¼ã‚¿ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒãƒ¼(TA7291P)ã€ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ¢ãƒ¼ã‚¿ãƒ¼ã€å˜ä¸‰ä¹¾é›»æ± ã€ãƒ©ã‚ºãƒ‘ã‚¤ã®ï¼”ã¤ã‚’ãƒ–ãƒ¬ãƒƒãƒ‰ãƒœãƒ¼ãƒ‰çµŒç”±ã§é…ç·šã—ã¾ã™ã€‚</p>
  <p><img src="img/practice26/moterdriver.png" class="img-fluid" alt="é…ç·š"></p>


  <h2>ãƒ©ã‚ºã‚¿ãƒ³ã‚¯ã® python ãƒ—ãƒ­ã‚°ãƒ©ãƒ </h2>
  <p>æœ€åˆã«[readchar]ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚$ sudo pip install readchar</p>
  <p>ä¸‹è¨˜ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ä¿å­˜ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åãŒtank.pyã®å ´åˆã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚³ãƒãƒ³ãƒ‰ã§ $ python tank.py ã§å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<pre>
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import RPi.GPIO as GPIO         # GPIOã‚’ä½¿ã†æº–å‚™
import sys                      # Linuxã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†æº–å‚™
import time                     # æ™‚é–“ç³»ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†æº–å‚™
import readchar                 # ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã‚’èª¿ã¹ã‚‹æº–å‚™

constLeftPWM = 17               # GPIOç•ªå·
constLeftIN1 = 27
constLeftIN2 = 22
constRightPWM = 16
constRightIN1 = 20
constRightIN2 = 21

GPIO.setwarnings( False )              # è­¦å‘Šã‚’è¡¨ç¤ºã•ã›ãªã„(éå»ã«GPIOã‚’ä½¿ã£ã¦ã„ã‚‹ã¨è­¦å‘Šè¡¨ç¤ºã•ã‚Œã‚‹)
GPIO.setmode( GPIO.BCM )               # GPIOç•ªå·ã§å‘½ä»¤ã™ã‚‹
GPIO.setup( constLeftPWM,  GPIO.OUT )  # GPIO17ã‚’å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹
GPIO.setup( constLeftIN1,  GPIO.OUT )  # GPIO27  ã€ƒ  (ä»¥ä¸‹åŒã˜)
GPIO.setup( constLeftIN2,  GPIO.OUT )
GPIO.setup( constRightPWM, GPIO.OUT )
GPIO.setup( constRightIN1, GPIO.OUT )
GPIO.setup( constRightIN2, GPIO.OUT )

pwmLeft = GPIO.PWM( constLeftPWM, 50 )  #50Hz
pwmLeft.start( 0.0 )
pwmRight = GPIO.PWM( constRightPWM, 50 )  #50Hz
pwmRight.start( 0.0 )

def moveForward():
	GPIO.output( constLeftIN1, 1 )
	GPIO.output( constLeftIN2, 0 )
	GPIO.output( constRightIN1, 1 )
	GPIO.output( constRightIN2, 0 )

def speedSlow():
	pwmLeft.ChangeDutyCycle( 50 )
	pwmRight.ChangeDutyCycle( 50 )

def speedHigh():
	pwmLeft.ChangeDutyCycle( 100 )
	pwmRight.ChangeDutyCycle( 100 )

def moveBack():
	GPIO.output( constLeftIN1, 0 )
	GPIO.output( constLeftIN2, 1 )
	GPIO.output( constRightIN1, 0 )
	GPIO.output( constRightIN2, 1 )

def moveLeft():
	GPIO.output( constLeftIN1, 0 )
	GPIO.output( constLeftIN2, 1 )
	GPIO.output( constRightIN1, 1 )
	GPIO.output( constRightIN2, 0 )

def moveRight():
	GPIO.output( constLeftIN1, 1 )
	GPIO.output( constLeftIN2, 0 )
	GPIO.output( constRightIN1, 0 )
	GPIO.output( constRightIN2, 1 )

def moveStop():
	GPIO.output( constLeftIN1, 0 )
	GPIO.output( constLeftIN2, 0 )
	GPIO.output( constRightIN1, 0 )
	GPIO.output( constRightIN2, 0 )

def end():
	pwmLeft.stop()
	pwmRight.stop()
	GPIO.cleanup()
	sys.exit(0)

######################################
# ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒãƒ³
######################################
if __name__ == '__main__':

	try:
		while 1:
			kb = readchar.readchar()
			sys.stdout.write(kb)

			if kb == 'w':
				speedHigh()
				moveForward()
			if kb == 'z':
				speedSlow()
				moveBack()
			if kb == 'a':
				speedSlow()
				moveLeft()
			if kb == 's':
				speedSlow()
				moveRight()
			if kb == 'x':
				moveStop()
			if kb == 'q':
				end()
			#time.sleep(3)

	except KeyboardInterrupt:
		moveStop()
		end()
  
</pre>
  <p>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œã¯ python [ãƒ•ã‚¡ã‚¤ãƒ«å] ã ã‚ˆã€‚</p>
  <pre>
    $ python tank.py

    [w]ã‚­ãƒ¼ã§é€²ã‚€  [x]ã‚­ãƒ¼ã§ã‚¹ãƒˆãƒƒãƒ—

  </pre>

  <h2>å˜ä¸‰ä¹¾é›»æ± </h2>
  <p>å‹•ã‹ã™ã¨ãã¯é›»æºã‚’ã‚ªãƒ³ã«ã—ã¾ã™ãŒã€ã—ã¾ã£ã¦ãŠãæ™‚ã¯é›»æºã‚’ã‚ªãƒ•ã«ã—ã¦ãã ã•ã„ã€‚</p>

  <h2>å‹•ã‹ãªã„ã¨ãï¼åˆ†ã‹ã‚‰ãªã„ã¨ãã¯ã“ã“ã‹ã‚‰è³ªå•ã—ã¦ãã ã•ã„</h2>
  <p>ğŸ“¨ <a href="https://docs.google.com/forms/d/e/1FAIpQLSecZV-4K8hYDC48I4Zshyz2mgEEvxKkg0Ncj1juJvL9N0mdfg/viewform">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é“å ´ï¼œãªã‚“ã§ã‚‚ç›¸è«‡ï¼</a></p>


  <!-- ä¸»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã“ã“ã¾ã§ -->
</div> <!-- <limegreen-container -->
</div> <!-- <container> -->

<!-- å…±é€šã®ãƒ•ãƒƒã‚¿ãƒ¼ -->
<div id="commonFooter"></div>
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<!-- My Header and Footer -->
<script>
  $(function() {
    $("#commonHeader").load("/header.html");
    $("#commonFooter").load("/footer.html");
  });
</script>
</body>
</html>